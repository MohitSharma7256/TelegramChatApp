(this["webpackJsonptelegram-clone"]=this["webpackJsonptelegram-clone"]||[]).push([[0],{100:function(e,t,c){"use strict";c.r(t);var s=c(2),a=c.n(s),n=c(31),i=c.n(n),o=(c(75),c(26)),r=c(122),l=c(120),d=c(58),j=c.n(d),b=c(8),h=c(47);c(102),c(79),c(81),c(103);h.a.initializeApp({apiKey:"AIzaSyA8Z1GUDLSUcN-l5-YqrZHLaciCCPB8pEU",authDomain:"telegram1-clone.firebaseapp.com",databaseURL:"https://telegram1-clone.firebaseio.com",projectId:"telegram1-clone",storageBucket:"telegram1-clone.appspot.com",messagingSenderId:"996835820069",appId:"1:996835820069:web:cbf0bacf455fd9a90c35cc",measurementId:"G-Q9LWYJW3DQ"}),h.a.firestore();var u=h.a,m=(c(84),c(4));function O(e){var t,c;let{massages:a}=e;const[n,i]=Object(s.useState)(""),[o,d]=Object(s.useState)(),{channelId:h}=Object(b.f)(),O=u.firestore();Object(s.useEffect)((()=>{const e=O.collection("channels").doc(h).onSnapshot((e=>i(e.data())));return()=>{e()}}),[O,h]),Object(s.useEffect)((()=>{d(Math.floor(5e3*Math.random()))}),[h]);const p="https://avatars.dicebear.com/api/human/".concat(o,".svg");return Object(m.jsx)("div",{className:"header",children:Object(m.jsxs)("div",{className:"header_main",children:[Object(m.jsxs)("div",{className:"header_left",children:[Object(m.jsx)(r.a,{src:p}),Object(m.jsxs)("div",{className:"header_info",children:[Object(m.jsx)("strong",{children:n.channelName}),Object(m.jsxs)("p",{children:["Last seen at  ",new Date(null===(t=a[a.length-1])||void 0===t||null===(c=t.timeStamp)||void 0===c?void 0:c.toDate()).toUTCString()]})]})]}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{})})]})})}c(92);var p=c(59),x=c.n(p),g=c(60),f=c.n(g),v=c(61),N=c.n(v),S=c(62),_=c.n(S);function y(e){let{handleChange:t,setInputText:c,inputText:s}=e;return Object(m.jsx)("div",{className:"message_sender",children:Object(m.jsx)("form",{onSubmit:e=>t(e),children:Object(m.jsxs)("div",{className:"message",children:[Object(m.jsx)(x.a,{}),Object(m.jsx)("div",{className:"send_input",children:Object(m.jsx)("input",{placeholder:"Write Your Message Here",value:s,onChange:e=>c(e.target.value)})}),Object(m.jsx)("button",{type:"submit",className:"hidden_btn"}),Object(m.jsx)(f.a,{}),Object(m.jsx)(N.a,{}),Object(m.jsx)(_.a,{})]})})})}c(93);function U(e){let{massages:t,currentUser:c}=e;return Object(m.jsx)("div",{className:"chat",children:t.map((e=>Object(m.jsxs)("div",{className:"message_body ".concat(c.displayName===e.displayName&&"message_body_receiver"," "),children:[Object(m.jsx)(r.a,{src:null===e||void 0===e?void 0:e.userPhotoURL}),Object(m.jsx)("div",{className:"message_container",children:Object(m.jsx)("p",{className:"messages ".concat(c.displayName===e.displayName&&"message_receiver"," "),children:null===e||void 0===e?void 0:e.massages})})]},e.id)))})}function w(){const{channelId:e}=Object(b.f)(),{currentUser:t}=Object(o.c)((e=>e.auth)),[c,a]=Object(s.useState)([]),[n,i]=Object(s.useState)([]),[r,l]=Object(s.useState)(""),d=u.firestore();return Object(s.useEffect)((()=>{e&&d.collection("channels").onSnapshot((e=>a(e.docs.map((e=>({id:e.id,data:e.data()}))))))}),[d,c,e]),Object(s.useEffect)((()=>{e&&d.collection("channels").doc(e).collection("massages").orderBy("timeStamp","asc").onSnapshot((e=>{i(e.docs.map((e=>e.data())))}))}),[e,d,i]),console.log(n),Object(m.jsxs)("div",{style:{flex:"0.7"},children:[Object(m.jsx)(O,{massages:n}),Object(m.jsx)(U,{currentUser:t,massages:n}),Object(m.jsx)(y,{inputText:r,handleChange:c=>{c.preventDefault(),console.log(r),e&&(d.collection("channels").doc(e).collection("massages").add({massages:r,timeStamp:u.firestore.FieldValue.serverTimestamp(),displayName:t.displayName,userPhotoURL:t.photoURL}),l(""))},setInputText:l})]})}var I=c(66),C=c.n(I),L=c(67),A=c.n(L),E=(c(94),c(33));c(95);function T(e){var t;let{id:c,channelName:a}=e;const[n,i]=Object(s.useState)([]),o=u.firestore(),[l,d]=Object(s.useState)();Object(s.useEffect)((()=>{c&&o.collection("channels").doc(c).collection("massages").orderBy("timeStamp","desc").onSnapshot((e=>{i(e.docs.map((e=>e.data())))}))}),[c,o,i]),Object(s.useEffect)((()=>{d(Math.floor(5e3*Math.random()))}),[c]);const j="https://avatars.dicebear.com/api/human/".concat(l,".svg");return Object(m.jsxs)(E.b,{className:"sidebar_row_main",to:"/channel/".concat(c),children:[Object(m.jsxs)("div",{className:"sidebar_row",children:[Object(m.jsxs)("div",{className:"sidebar_left",children:[Object(m.jsx)(r.a,{src:j}),Object(m.jsxs)("div",{className:"sidebar_info",children:[Object(m.jsx)("strong",{children:a}),Object(m.jsx)("p",{className:"text",children:null===(t=n[0])||void 0===t?void 0:t.massages})]})]}),Object(m.jsx)("p",{children:"time"})]}),Object(m.jsx)("div",{className:"line"})]})}var k=c(121),D=c(64),P=c.n(D),F=c(63),R=c.n(F),B=c(65),M=c.n(B);c(96);function G(){const{currentUser:e}=Object(o.c)((e=>e.auth));return Object(m.jsx)("div",{className:"sidebar_bottom_main",children:Object(m.jsxs)("div",{className:"sidebar_bottom_icons",children:[Object(m.jsx)(r.a,{src:(null===e||void 0===e?void 0:e.photoURL)||"https://pagesix.com/wp-content/uploads/sites/3/2020/03/bebe-rexha-30.jpg?quality=80&strip=all"}),Object(m.jsx)(R.a,{}),Object(m.jsxs)(k.a,{smDown:!0,children:[Object(m.jsx)(P.a,{}),Object(m.jsx)(M.a,{})]})]})})}function W(e){let{handleAddNewChannel:t,channel:c}=e;return Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsxs)("div",{className:"sidebar_header",children:[Object(m.jsxs)("div",{className:"search",children:[Object(m.jsx)(C.a,{}),Object(m.jsx)("input",{type:"text",placeholder:"Search for channels or users"})]}),Object(m.jsx)(l.a,{onClick:t,children:Object(m.jsx)(A.a,{})})]}),c.map((e=>Object(m.jsx)(T,{id:e.id,channelName:e.data.channelName},e.id))),Object(m.jsx)(G,{})]})}c(97);function J(){const[e,t]=Object(s.useState)([]),c=u.firestore();Object(s.useEffect)((()=>{const e=c.collection("channels").onSnapshot((e=>t(e.docs.map((e=>({id:e.id,data:e.data()}))))));return()=>{e()}}),[c,e]);return Object(m.jsx)("div",{className:"chat_page",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(W,{channel:e,handleAddNewChannel:()=>{const e=prompt("Enter a Channel Name");e&&c.collection("channels").add({channelName:e})}}),Object(m.jsx)(b.c,{children:Object(m.jsx)(b.a,{path:"/channel/:channelId",children:Object(m.jsx)(w,{})})})]})})}c(98);const Y="USER_SIGN_IN",q="USER_SIGN_OUT",z=e=>({type:Y,payload:e});function H(){const e=Object(o.b)(),t=async t=>{let c;const s=u.auth();"facebook"===t&&(c=new u.auth.FacebookAuthProvider),"google"===t&&(c=new u.auth.GoogleAuthProvider);try{const t=await s.signInWithPopup(c);console.log(t.user),e(z(t.user))}catch(a){console.log(a)}};return Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("img",{src:Q,alt:" Logo"}),Object(m.jsx)("button",{onClick:()=>{t("google")},children:"Login to Telegram"})]})}const Q="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Telegram_logo.svg/768px-Telegram_logo.svg.png";function Z(){const{isAuthenticated:e}=Object(o.c)((e=>e.auth));return Object(m.jsx)("div",{className:"main_page",children:e?Object(m.jsx)(J,{}):Object(m.jsx)(H,{})})}c(99);var K=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(Z,{})})};var V=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,124)).then((t=>{let{getCLS:c,getFID:s,getFCP:a,getLCP:n,getTTFB:i}=t;c(e),s(e),a(e),n(e),i(e)}))},X=c(40);const $={isAuthenticated:!1,currentUser:null};var ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,{type:t,payload:c}=arguments.length>1?arguments[1]:void 0;switch(t){case Y:return{...e,isAuthenticated:!0,currentUser:c};case q:return{...e,isAuthenticated:!1,currentUser:null};default:return e}};var te=Object(X.b)({auth:ee}),ce=c(68);const se=[c.n(ce).a],ae=Object(X.c)(te,Object(X.a)(...se));i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(o.a,{store:ae,children:Object(m.jsx)(E.a,{children:Object(m.jsx)(K,{})})})}),document.getElementById("root")),V()},75:function(e,t,c){},84:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){},94:function(e,t,c){},95:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[100,1,2]]]);
//# sourceMappingURL=main.9a9d01fc.chunk.js.map